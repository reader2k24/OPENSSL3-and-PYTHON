 
# Руководство по генерации пары ключей и подписанию данных с использованием эллиптической криптографии (EC) в командной строке с помощью OpenSSL

Этот репозиторий содержит инструкции и программы для генерации ключей, подписания данных и проверки подписи с использованием эллиптической криптографии (EC) в командной строке с помощью OpenSSL.

## Генерация пары ключей EC

### Шаги
1. Сгенерируйте пару ключей EC с использованием кривой `sect571r1` и сохраните ее в файл `ec_keypair.pem`:
    ```bash
    $ openssl genpkey -algorithm EC -pkeyopt ec_paramgen_curve:sect571r1 -out ec_keypair.pem
    ```

2. Посмотрите информацию о сгенерированном ключе:
    ```bash
    $ openssl pkey -in ec_keypair.pem -noout -text
    ```

## Извлечение открытого ключа из пары

### Шаги
1. Извлеките открытый ключ из сгенерированной пары и сохраните его в файл `ec_public_key.pem`:
    ```bash
    $ openssl pkey -in ec_keypair.pem -pubout -out ec_public_key.pem
    ```

2. Посмотрите информацию о сгенерированном открытом ключе:
    ```bash
    $ openssl pkey -in ec_public_key.pem -pubin -noout -text
    ```

## Подписание данных в командной строке

### Шаги
1. Сгенерируйте файл с тестовыми данными для подписания:
    ```bash
    $ seq 20000 > somefile.txt
    ```

2. Подпишите файл, используя функцию хеширования SHA3-512 и ранее сгенерированную пару ключей EC:
    ```bash
    $ openssl pkeyutl -sign -digest sha3-512 -inkey ec_keypair.pem -in somefile.txt -rawin -out somefile.txt.signature
    ```

3. Проверьте размеры и контрольные суммы файлов:
    ```bash
    $ cksum somefile.txt*
    ```

4. Проверьте подпись, используя исходный файл, подпись и открытый ключ:
    ```bash
    $ openssl pkeyutl -verify -digest sha3-512 -inkey ec_public_key.pem -in somefile.txt -rawin -sigfile somefile.txt.signature
    ```

## Подписание данных из программы

### Шаги
1. Напишите программу `ec-sign`, которая будет использовать алгоритм ECDSA для подписания данных. Программа принимает три аргумента:
    - Имя входного файла, содержащего подлежащие подписанию данные.
    - Имя выходного файла, в который будет записана подпись.
    - Имя файла, содержащего пару ключей для подписания.

2. Выполните программу `ec-sign`:
    ```bash
    $ python3 ec-sign somefile.txt somefile.txt.signature ec_keypair.pem
    ```

3. Проверьте подпись с помощью команды OpenSSL:
    ```bash
    $ openssl pkeyutl -verify -digest sha3-512 -inkey ec_public_key.pem -in somefile.txt -rawin -sigfile somefile.txt.signature
    ```

## Проверка подписи из программы

### Шаги
1. Напишите программу `ec-verify`, которая будет проверять подписи, созданные программой `ec-sign` или `openssl pkeyutl`. Программа принимает три аргумента:
    - Имя входного файла, содержащего подписанные данные.
    - Имя файла, содержащего подпись.
    - Имя файла, содержащего открытый ключ для проверки.

2. Выполните программу `ec-verify`:
    ```bash
    $ python3 ec-verify somefile.txt somefile.txt.signature ec_public_key.pem
    ```

3. Убедитесь, что программа `ec-verify` успешно проверяет корректную подпись:
    ```bash
    $ echo "additional data" >> somefile.txt
    $ python3 ec-verify somefile.txt somefile.txt.signature ec_public_key.pem
    ```

## Заключение

Этот репозиторий предоставляет простые инструкции и программы для генерации ключей, подписания данных и проверки подписи с использованием эллиптической криптографии (EC) в командной строке с помощью OpenSSL. Вы можете легко генерировать ключи, подписывать данные и проверять подписи, обеспечивая безопасность ваших данных.
